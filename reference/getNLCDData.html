<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function to match watershed-level National Land Cover Database (NLCD) data
to each fish and macroinvertebrate sampling site in both space and time
by calling StreamCat."><title>Match data from the National Land Cover Database to each fish and macroinvertebrate sampling site — getNLCDData • finsyncR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Match data from the National Land Cover Database to each fish and macroinvertebrate sampling site — getNLCDData"><meta property="og:description" content="This function to match watershed-level National Land Cover Database (NLCD) data
to each fish and macroinvertebrate sampling site in both space and time
by calling StreamCat."><meta property="og:image" content="https://didactic-carnival-mz54op5.pages.github.io/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">finsyncR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/GettingStarted.html">Getting Started with finsyncR</a>
    <a class="dropdown-item" href="../articles/Metadata.html">Metadata</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Match data from the National Land Cover Database to each fish and macroinvertebrate sampling site</h1>
      
      <div class="d-none name"><code>getNLCDData.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function to match watershed-level National Land Cover Database (NLCD) data
to each fish and macroinvertebrate sampling site in both space and time
by calling StreamCat.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getNLCDData</span><span class="op">(</span><span class="va">data</span>, scale <span class="op">=</span> <span class="st">"Cat"</span>, group <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>Input dataset must include columns for
<code>"SiteNumber"</code> and <code>"CollectionYear"</code>.</p></dd>


<dt>scale</dt>
<dd><p>Scale for NLCD data to be generated. Must be <code>"Cat"</code> for
catchment or <code>"Ws"</code> for watershed. See <code>Details</code> below for more
information.</p></dd>


<dt>group</dt>
<dd><p>logical. Should the NLCD data be grouped into broad categories?
<code>TRUE</code> or <code>FALSE</code>. See <code>Details</code> below for more
information.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Function returns a site by year dataframe of NLCD data for either the
catchment or watershed scale.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Land-use/land-cover data is extracted from the Multi-Resolution Land
Characteristics (MRLC) Consortium National Land Cover
Database (NLCD). These LULC data are available in the following years:
2001, 2004, 2006, 2008, 2011, 2013, 2016, and 2019. For years in the input
data that are not exact year matches from this list, years are matched to
the closest year with NLCD data (e.g. a site sampled in 1995 will have NLCD
data from 2001). Note that for samples that fall at the midpoint of two NLCD
years (e.g. 2005), the function defaults to the earlier year (e.g. a site
sampled in 2005 will have NLCD data from 2004).</p>
<p>Data can be extracted at the catchment (<code>"Cat"</code>) or watershed (<code>"Ws"</code>)
scales. The catchment includes land area that drains directly to the sampled
stream segment of the medium-resolution National Hydrography Dataset version
2.(NHDPlusV2), but excludes data from upstream segments. The watershed scale
includes data from the local catchment and from all upstream contributing catchments.</p>
<p>NLCD data can be grouped (<code>group = TRUE</code>) into five broad categories.
These categories include "water" (grouping of all wetland and open water land
covers), "urban" (grouping of all urban land covers), "forest" (grouping of
deciduous, coniferous, and mixed forests), "open" (grouping of shrub, barren
land, grassland, and hay/pasture), and "crop" (no grouping, just the crop
land use).</p>
<p>The function gathers catchment/watershed NLCD data from the StreamCat database
(Hill et al. 2016) via the StreamCat API (https://www.epa.gov/national-aquatic-resource-surveys/streamcat-metrics-rest-api).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Hill, Ryan A., Marc H. Weber, Scott G. Leibowitz, Anthony R. Olsen,
and Darren J. Thornbrugh, 2016. The Stream-Catchment (StreamCat) Dataset:
A Database of Watershed Metrics for the Conterminous United States. Journal of
the American Water Resources Association (JAWRA) 52:120-128. DOI: 10.1111/1752-1688.12372.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michael Mahon, Ryan Hill, Samantha Rumschlag, Terry Brown</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## Code to generate the percent land-use/land-cover in the catchment for</span></span></span>
<span class="r-in"><span><span class="co">## site numbers "USGS-05276005" and "USGS-01390450" from 2007 2008, respectively.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">dat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>SiteNumber <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USGS-05276005"</span>,<span class="st">"USGS-01390450"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   CollectionYear <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2007</span>,<span class="fl">2008</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">getNLCDData</span><span class="op">(</span>data<span class="op">=</span><span class="va">dat</span>,</span></span>
<span class="r-in"><span>  scale <span class="op">=</span> <span class="st">"Cat"</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Code to generate the percent land-use/land-cover in the catchment for</span></span></span>
<span class="r-in"><span><span class="co">## all samples in the base macroinvertebrate dataset, and grouping those</span></span></span>
<span class="r-in"><span><span class="co">## LULC data into broad categories.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">invertDat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="getInvertData.html">getInvertData</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">invertDat1_forNLCD</span> <span class="op">&lt;-</span> <span class="va">invertDat1</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">SiteNumber</span>, <span class="va">CollectionYear</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">dat1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">invertDat1_forNLCD</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">getNLCDData</span><span class="op">(</span>data<span class="op">=</span><span class="va">dat1</span>,</span></span>
<span class="r-in"><span>  scale <span class="op">=</span> <span class="st">"Cat"</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Michael Mahon, Samantha Rumschlag, Devin Jones, Ryan Hill, Terry Brown, Ethan Brown, Stefan Kunz.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

