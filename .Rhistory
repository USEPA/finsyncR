install.packages("C:/Users/mikem/Documents/R Package Builds/StreamData_0.0.0.9000.tar.gz", type = "source")
devtools::build()
install.packages("C:/Users/mikem/Documents/R Package Builds/StreamData_0.0.0.9000.tar.gz", type = "source", repos = NULL)
library(StreamData)
?StreamData
usethis::use_proprietary_license("Samantha Rumschlag and Michael Mahon")
getInvertData(taxonLevel = "Family")$SiteNumber
devtools::document()
devtools::document()
devtools::build()
install.packages("C:/Users/mikem/Documents/R Package Builds/StreamData_0.0.0.9000.tar.gz", repos = NULL, type = "source")
library(StreamData)
?StreamData
?getAlgaeData
?getFishData
devtools::document()
?getCountyPest
devtools::document()
library(StreamData)
devtools::build_vignettes()
usethis::use_readme_rmd()
?install_github
devtools::build_readme()
devtools::build_readme()
devtools::build_readme()
devtools::document()
devtools::build_vignettes()
devtools::document()
?devtools::install_github
devtools::build_readme()
devtools::build()
install.packages(C:/Users/mikem/Documents/R Package Builds/StreamData_0.0.0.9000.tar.gz, repo = NULL, type = "source")
install.packages("C:/Users/mikem/Documents/R Package Builds/StreamData_0.0.0.9000.tar.gz", repo = NULL, type = "source")
library(StreamData)
getwd()
zip(zipfile = 'testZip', files = 'inst/extdata/20201217.0745.FishResults.csv')
read.csv(unzip("testZip.zip"))
fish <- utils::read.csv(system.file("extdata",
"testZip.zip",
package = "StreamData"),
colClasses = c("SiteNumber" = "character"))
fish <- utils::read.csv(unzip(system.file("extdata",
"testZip.zip",
package = "StreamData"),
colClasses = c("SiteNumber" = "character")))
fish <- utils::read.csv(unzip(system.file("extdata",
"testZip.zip",
package = "StreamData")),
colClasses = c("SiteNumber" = "character"))
system.file("extdata",
"testZip.zip",
package = "StreamData")
library(StreamData)
fish <- utils::read.csv(unzip(system.file("extdata",
"testZip.zip",
package = "StreamData")),
colClasses = c("SiteNumber" = "character"))
fish
getwd()
zip(zipfile = '/inst/extdata/PestEst', files = 'inst/extdata/pestCountyEstYrs.txt')
getwd()
zip(zipfile = 'C:/Users/mikem/Documents/R Package Builds/StreamData/inst/extdata/PestEst',
files = 'inst/extdata/pestCountyEstYrs.txt')
zip(zipfile = 'C:/Users/mikem/Documents/R Package Builds/StreamData/inst/extdata/FishResults',
files = 'inst/extdata/20201217.0745.FishResults.csv')
zip(zipfile = 'C:/Users/mikem/Documents/R Package Builds/StreamData/inst/extdata/InvertResults',
files = 'inst/extdata/20201217.0749.InvertResults.csv')
zip(zipfile = 'C:/Users/mikem/Documents/R Package Builds/StreamData/inst/extdata/AlgaeResults',
files = 'inst/extdata/20201217.0757.AlgResults.csv')
devtools::document()
devtools::build_vignettes(.)
devtools::build_vignettes()
devtools::build()
library(StreamData)
devtools::document()
devtools::document()
library(StreamData)
devtools::build_vignettes()
getAlgaeData(taxonLevel = "Family")
algType = "peri"
dataType = "abun"
taxonLevel = "Species"
program = "National Water Quality Assessment"
algae = utils::read.csv(unzip(system.file("extdata",
"AlgaeResults.zip",
package = "StreamData")),
colClasses = c("SiteNumber" = "character"))
Project <- utils::read.csv(system.file("extdata",
"20201217.0757.Project.csv",
package = "StreamData"))
if(colnames(algae)[1] != "SIDNO"){
colnames(algae)[1] = "SIDNO"
}
database
program
database <- program
algae <- algae %>%
dplyr::filter(ProjectLabel %in% (Project %>%
dplyr::filter(Program %in% database) %>%
dplyr::distinct(ProjectLabel,
.keep_all = FALSE))[ , "ProjectLabel"]) %>%
dplyr::select(-LabRecordID, -LabOrderID, -LabSampleID, -FieldComponent,
-ReleaseCategory, -SiteVisitSampleNumber,
-StudyReachName,
-PublishedSortOrder, -BioDataTaxonName, -BioDataShortName,
-BenchTaxonName, -BenchTaxonNameReferenceCode, -BenchTaxonNADEDID,
-TaxonRecordSource, -IdentificationEntity, -IdentificationDate,
-IdentifiedBy, -VerificationEntity, -VerificationDate,
-CurationEntity, -CurationDate, -LabTaxonID,
-PublishedTaxonNameAuthority, -TaxonVersionNumber)
algsamp = utils::read.csv(system.file("extdata",
"20201217.0757.AlgSamp.csv",
package = "StreamData"),
colClasses = c("SiteNumber" = "character"))
if(colnames(algsamp)[1] != "SIDNO"){
colnames(algsamp)[1] = "SIDNO"
}
algsamp = algsamp %>%
dplyr::select(SIDNO,
SiteNumber,
PeriphytonHabitatSampled,
SamplingMethodOrDevice,
SubsurfaceGrabDepth_m,
StudyReachName)
algsampinv = utils::read.csv(system.file("extdata",
"20201217.0757.SampleInv.csv",
package = "StreamData"),
colClasses = c("SiteNumber" = "character"))
if(colnames(algsampinv)[1] != "SIDNO"){
colnames(algsampinv)[1] = "SIDNO"
}
algsampinv = algsampinv %>%
dplyr::select(SIDNO,
ReplicateType)
algsite = utils::read.csv(system.file("extdata",
"20201217.0757.SiteInfo.csv",
package = "StreamData"),
colClasses = c("SiteNumber" = "character"))
algsite = algsite %>%
dplyr::select(SiteNumber,
Latitude_dd,
Longitude_dd,
CoordinateDatum,
HUCCode,
DrainageArea_mi2,
SiteTypeName,
CountyFIPSCode,
StateFIPSCode)
algsampinfo = dplyr::left_join(dplyr::left_join(algsamp,
algsampinv,
by = "SIDNO"),
algsite,
by = "SiteNumber") %>%
dplyr::select(-SiteNumber) %>%
dplyr::mutate(CountyFIPSCode = sprintf("%03d", CountyFIPSCode),
StateFIPSCode = sprintf("%02d", StateFIPSCode))
algae = dplyr::left_join(algae, algsampinfo, by = "SIDNO")
devtools::document()
library(StreamData)
devtools::build_vignettes()
devtools::build()
install.packages("C:/Users/mikem/Documents/R Package Builds/StreamData_0.0.0.9000.tar.gz", repo = NULL, type = "source")
detach("package:StreamData", unload = TRUE)
install.packages("C:/Users/mikem/Documents/R Package Builds/StreamData_0.0.0.9000.tar.gz", repo = NULL, type = "source")
library(StreamData)
##Read in the StreamData R package
library(StreamData)
Inverts <- getInvertData(dataType = "abun",
taxonLevel = "Family",
program = "National Water Quality Assessment",
lifestage = FALSE,
abunMeasure = "density")
devtools::document()
devtools::document()
library(StreamData)
getInvertData(taxonLevel = "Family")
devtools::build_readme()
devtools::document()
devtools::document()
algae = utils::read.csv(unzip(system.file("extdata",
"AlgaeResults.zip",
package = "StreamData")),
colClasses = c("SiteNumber" = "character"))
View(algae)
unique(algae$ProjectLabel)
Project <- utils::read.csv(system.file("extdata",
"20201217.0757.Project.csv",
package = "StreamData"))
View(Project)
if(colnames(algae)[1] != "SIDNO"){
colnames(algae)[1] = "SIDNO"
}
grepl("RSQA", algae$ProjectLabel)
algae$RSQA = ifelse(grepl("RSQA", algae$ProjectLabel),
"RSQA",
"Non-RSQA")
algae$RSQA
algae %>%
group_by(SiteNumber) %>%
slice(1)
library(tidyverse)
algae %>%
group_by(SiteNumber) %>%
slice(1)
algae %>%
mutate(RSQA = ifelse(grepl("RSQA", algae$ProjectLabel),
"RSQA",
"Non-RSQA")) %>%
group_by(SiteNumber) %>%
slice(1)
algae = algae %>%
mutate(RSQA = ifelse(grepl("RSQA", algae$ProjectLabel),
"RSQA",
"Non-RSQA")) %>%
group_by(SiteNumber) %>%
slice(1)
algae = utils::read.csv(unzip(system.file("extdata",
"AlgaeResults.zip",
package = "StreamData")),
colClasses = c("SiteNumber" = "character"))
if(colnames(algae)[1] != "SIDNO"){
colnames(algae)[1] = "SIDNO"
}
algae = algae %>%
mutate(RSQA = ifelse(grepl("RSQA", algae$ProjectLabel),
"RSQA",
"Non-RSQA")) %>%
group_by(SiteNumber) %>%
slice(1)
algaesites = read.csv("C:/Users/mikem/Documents/Research/USGS Stream Macros/Algae/20201217.0757.SiteInfo.csv",
colClasses = c("SiteNumber" = "character"))
algaesites
colnames(algaesites)
colnames(algae)
algae = algae %>%
mutate(RSQA = ifelse(grepl("RSQA", algae$ProjectLabel),
"RSQA",
"Non-RSQA")) %>%
group_by(SiteNumber) %>%
slice(1) %>%
dplyr::select(SiteNumber, RSQA)
algae = utils::read.csv(unzip(system.file("extdata",
"AlgaeResults.zip",
package = "StreamData")),
colClasses = c("SiteNumber" = "character"))
if(colnames(algae)[1] != "SIDNO"){
colnames(algae)[1] = "SIDNO"
}
algae = algae %>%
mutate(RSQA = ifelse(grepl("RSQA", algae$ProjectLabel),
"RSQA",
"Non-RSQA")) %>%
group_by(SiteNumber) %>%
slice(1) %>%
dplyr::select(SiteNumber, RSQA)
algae = utils::read.csv(unzip(system.file("extdata",
"AlgaeResults.zip",
package = "StreamData")),
colClasses = c("SiteNumber" = "character"))
if(colnames(algae)[1] != "SIDNO"){
colnames(algae)[1] = "SIDNO"
}
algae = algae %>%
mutate(RSQA = ifelse(grepl("RSQA", ProjectLabel),
"RSQA",
"Non-RSQA")) %>%
group_by(SiteNumber) %>%
slice(1) %>%
dplyr::select(SiteNumber, RSQA)
algae
algaesites = read.csv("C:/Users/mikem/Documents/Research/USGS Stream Macros/Algae/20201217.0757.SiteInfo.csv",
colClasses = c("SiteNumber" = "character"))
algaesites = algaesites %>%
dplyr::select(SiteNumber, Latitude_dd, Longitude_dd, CoordinateDatum)
algae = algae %>%
mutate(RSQA = ifelse(grepl("RSQA", ProjectLabel),
"RSQA",
"Non-RSQA")) %>%
group_by(SiteNumber) %>%
slice(1) %>%
dplyr::select(SiteNumber, RSQA) %>%
group_by(RSQA) %>%
summarize(count = n())
algae %>%
group_by(RSQA) %>%
summarize(count = n())
fish <- utils::read.csv(unzip(system.file("extdata",
"FishResults.zip",
package = "StreamData")),
colClasses = c("SiteNumber" = "character"))
if(colnames(fish)[1] != "SIDNO"){
colnames(fish)[1] = "SIDNO"
}
fish = fish %>%
mutate(RSQA = ifelse(grepl("RSQA", ProjectLabel),
"RSQA",
"Non-RSQA")) %>%
group_by(SiteNumber) %>%
slice(1) %>%
dplyr::select(SiteNumber, RSQA)
fish
fish %>%
group_by(RSQA) %>%
summarize(count = n())
Inverts <- utils::read.csv(unzip(system.file("extdata",
"InvertResults.zip",
package = "StreamData")),
colClasses = c("SiteNumber" = "character"))
if(colnames(Inverts)[1] != "SIDNO"){
colnames(Inverts)[1] = "SIDNO"
}
Inverts = Inverts %>%
mutate(RSQA = ifelse(grepl("RSQA", ProjectLabel),
"RSQA",
"Non-RSQA")) %>%
group_by(SiteNumber) %>%
slice(1) %>%
dplyr::select(SiteNumber, RSQA)
Inverts %>%
group_by(RSQA) %>%
summarize(count = n())
do.call(bind_rows(), Algae, Fish, Inverts)
do.call(bind_rows(), list(Algae, Fish, Inverts))
do.call(bind_rows(), list(algae, Fish, Inverts))
do.call(bind_rows(), list(algae, fish, Inverts))
list(algae, fish, Inverts)
do.call(bind_rows, list(algae, fish, Inverts))
allsites = do.call(bind_rows, list(algae, fish, Inverts))
allsites %>%
group_by(SiteNumber) %>%
slice() %>%
ungroup() %>%
group_by(RSQA) %>%
summarize(count = n())
732 / (732+5658)
allsites %>%
group_by(SiteNumber) %>%
slice(1) %>%
ungroup() %>%
group_by(RSQA) %>%
summarize(count = n())
402 / (402+2639)
